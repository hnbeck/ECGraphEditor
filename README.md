# ECGraphEditor
A small tool to connect to a Neo4j database, edit the network and write it back.

**currently under development.**
**This software is alpha, V_0.1, if you want to use it do it at your own risk ! Your Neo4j database may be changed**

This version is intended for testing.
It is intended for non-commercial and non-productive use only.

## Libraries
This tool uses and requires

- **RNeo4j** from Nicole White [details here] (http://github.com/nicolewhite/RNeo4j)
- **visNetwork** 0.2.0 from Benoit Thieurmel [details here] (http://dataknowledge.github.io/visNetwork/)
- **shinyDashboard** 0.5.1 from Winston Chang (http://github.com/rstudio/shinydaahboard.git)

This tool needs a running

- **Neo4j** [details here] (http://neo4j.com/)

Thanks for this very useful packages !

## Usage

In general the workflow is

- run a Neo4j database containing at least one labeled node
- open the server.R and ui.R file in **RStudio** and so "Run Application" to start the Shiny application
- filter the graph to load: decide which node kind and which edge types (=relation types) to load
- load the graph
- modify and save the graph back to Neo4J

##  Graph filtering

The underlaying vis.js used by visNetwork can only display a "label", use the "title" for popup
and take the "value" of a node for calculating the node size. In the meta graph, you can map
this aspects to node properties.

Example: the meta graph

(Label)->(description)->(Actor)
(title)->(birthdate)->(Actor)

means that the birthdate of an Actor is used for popup info, the description for displaying text
beside the node. Label and title are of kind "Aspects", description and birthdate are of kind "Properties", 
Actor is of kind "Labels" in the meta graph.

The metagraph can be done like this 

- you see two panels on start up: a meta graph and the graph itself
- delete nodes of kind "Labels" in meta graph if you do not want to load nodes with such label
- or add nodes of kind "Labels" to introduce new node kinds
- add or delete "Properties" nodes.
- Aspect nodes are predetermined and cannot be changed
- add edges from "Aspects" nodes to "Properties" nodes and (to introduce new properties for a node kind)
	from "Properties" to "Labels" 

**Note** : 
- node / edge IDs will be generated by Neo4j when added nodes/edges are saved to database
because Neo4j manages its own IDs
- added properties and labels (=new node kinds) only go into database by introducing nodes in the graph and save them.

## Graph manipulation

- select an "Labels" node in the meta graph
- add a node in the graph
- provide the label field, which property is set by this is determined by current meta graph
- add edges (select edge type to use on the left list box, new types can be added), delete edges
- delete nodes
- changes will be collected and applied in data save order on data base if "save graph" is pressed


More details to come.

## Known issues

As of alpha, there are bugs ;) 
But this is important to note:
- the Neo4j database shall have at least one node with one label, empty databases cannot be handled
- all nodes shall have exactly one label and at least one property per node kind
- edge properties will be ignored so far

## License and copyright
Please refer to the "LICENSE" file in this directory. 
Copyright of used libraries and packages as well as for Neo4j is hold by their owners.
Refer to the related web sites for details